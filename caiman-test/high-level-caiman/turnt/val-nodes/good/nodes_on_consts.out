Program {
    path: "",
    version: Version {
        major: 0,
        minor: 0,
        detailed: 2,
    },
    declarations: [
        TypeDecl(
            Local(
                LocalType {
                    name: "BufferSpace",
                    data: BufferSpace,
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "Event",
                    data: Event,
                },
            ),
        ),
        TypeDecl(
            FFI(
                I64,
            ),
        ),
        TypeDecl(
            FFI(
                I32,
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "bool",
                    data: NativeValue {
                        storage_type: FFI(
                            I32,
                        ),
                    },
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "&bool",
                    data: Ref {
                        storage_type: FFI(
                            I32,
                        ),
                        storage_place: Local,
                        buffer_flags: BufferFlags {
                            map_read: true,
                            map_write: true,
                            copy_src: false,
                            copy_dst: false,
                            storage: false,
                            uniform: false,
                        },
                    },
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "i64",
                    data: NativeValue {
                        storage_type: FFI(
                            I64,
                        ),
                    },
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "&i64",
                    data: Ref {
                        storage_type: FFI(
                            I64,
                        ),
                        storage_place: Local,
                        buffer_flags: BufferFlags {
                            map_read: true,
                            map_write: true,
                            copy_src: false,
                            copy_dst: false,
                            storage: false,
                            uniform: false,
                        },
                    },
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "i32",
                    data: NativeValue {
                        storage_type: FFI(
                            I32,
                        ),
                    },
                },
            ),
        ),
        TypeDecl(
            Local(
                LocalType {
                    name: "&i32",
                    data: Ref {
                        storage_type: FFI(
                            I32,
                        ),
                        storage_place: Local,
                        buffer_flags: BufferFlags {
                            map_read: true,
                            map_write: true,
                            copy_src: false,
                            copy_dst: false,
                            storage: false,
                            uniform: false,
                        },
                    },
                },
            ),
        ),
        FunctionClass(
            FunctionClass {
                name: FunctionClassId(
                    "_loop",
                ),
                input_types: [],
                output_types: [],
            },
        ),
        ExternalFunction(
            ExternalFunction {
                kind: CPUEffect,
                value_function_binding: FunctionClassBinding {
                    default: false,
                    function_class: FunctionClassId(
                        "_loop",
                    ),
                },
                name: "_loop_impl",
                input_args: [],
                output_types: [],
            },
        ),
        Effect(
            EffectDeclaration {
                name: EffectId(
                    "_loop_eff",
                ),
                effect: FullyConnected {
                    effectful_function_ids: [
                        ExternalFunctionId(
                            "_loop_impl",
                        ),
                    ],
                },
            },
        ),
        Funclet(
            Funclet {
                kind: Timeline,
                header: FuncletHeader {
                    name: FuncletId(
                        "time",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_in_e",
                                ),
                            ),
                            typ: Local(
                                "Event",
                            ),
                            tags: [],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_out0",
                                ),
                            ),
                            typ: Local(
                                "Event",
                            ),
                            tags: [],
                        },
                    ],
                    binding: None,
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "e",
                                    ),
                                ),
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "e",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: Spatial,
                header: FuncletHeader {
                    name: FuncletId(
                        "space",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_in_bs",
                                ),
                            ),
                            typ: Local(
                                "BufferSpace",
                            ),
                            tags: [],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_out0",
                                ),
                            ),
                            typ: Local(
                                "BufferSpace",
                            ),
                            tags: [],
                        },
                    ],
                    binding: None,
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "bs",
                                    ),
                                ),
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "bs",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: Value,
                header: FuncletHeader {
                    name: FuncletId(
                        "main",
                    ),
                    args: [],
                    ret: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "o",
                                ),
                            ),
                            typ: Local(
                                "i64",
                            ),
                            tags: [],
                        },
                    ],
                    binding: SpecBinding(
                        FunctionClassBinding {
                            default: false,
                            function_class: FunctionClassId(
                                "main",
                            ),
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "b",
                                    ),
                                ),
                                node: Constant {
                                    value: Filled(
                                        "0",
                                    ),
                                    type_id: Filled(
                                        Local(
                                            "bool",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "one",
                                    ),
                                ),
                                node: Constant {
                                    value: Filled(
                                        "1",
                                    ),
                                    type_id: Filled(
                                        Local(
                                            "i64",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "two",
                                    ),
                                ),
                                node: Constant {
                                    value: Filled(
                                        "2",
                                    ),
                                    type_id: Filled(
                                        Local(
                                            "i64",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "r",
                                    ),
                                ),
                                node: Select {
                                    condition: Filled(
                                        NodeId(
                                            "b",
                                        ),
                                    ),
                                    true_case: Filled(
                                        NodeId(
                                            "one",
                                        ),
                                    ),
                                    false_case: Filled(
                                        NodeId(
                                            "two",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "r",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        FunctionClass(
            FunctionClass {
                name: FunctionClassId(
                    "main",
                ),
                input_types: [],
                output_types: [
                    Local(
                        "i64",
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: ScheduleExplicit,
                header: FuncletHeader {
                    name: FuncletId(
                        "_foo0",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_out0",
                                ),
                            ),
                            typ: Local(
                                "i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "o",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_out0",
                                ),
                            ),
                            typ: Local(
                                "i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "o",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    binding: ScheduleBinding(
                        ScheduleBinding {
                            implicit_tags: (
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ),
                            meta_map: MetaMapping {
                                value: (
                                    MetaId(
                                        "val",
                                    ),
                                    FuncletId(
                                        "main",
                                    ),
                                ),
                                timeline: (
                                    MetaId(
                                        "tmln",
                                    ),
                                    FuncletId(
                                        "time",
                                    ),
                                ),
                                spatial: (
                                    MetaId(
                                        "sptl",
                                    ),
                                    FuncletId(
                                        "space",
                                    ),
                                ),
                            },
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "_out0",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: ScheduleExplicit,
                header: FuncletHeader {
                    name: FuncletId(
                        "foo",
                    ),
                    args: [],
                    ret: [
                        FuncletArgument {
                            name: None,
                            typ: Local(
                                "i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "o",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    binding: ScheduleBinding(
                        ScheduleBinding {
                            implicit_tags: (
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ),
                            meta_map: MetaMapping {
                                value: (
                                    MetaId(
                                        "val",
                                    ),
                                    FuncletId(
                                        "main",
                                    ),
                                ),
                                timeline: (
                                    MetaId(
                                        "tmln",
                                    ),
                                    FuncletId(
                                        "time",
                                    ),
                                ),
                                spatial: (
                                    MetaId(
                                        "sptl",
                                    ),
                                    FuncletId(
                                        "space",
                                    ),
                                ),
                            },
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t0",
                                    ),
                                ),
                                node: AllocTemporary {
                                    place: Filled(
                                        Local,
                                    ),
                                    storage_type: Filled(
                                        FFI(
                                            I32,
                                        ),
                                    ),
                                    buffer_flags: Filled(
                                        BufferFlags {
                                            map_read: true,
                                            map_write: true,
                                            copy_src: false,
                                            copy_dst: false,
                                            storage: false,
                                            uniform: false,
                                        },
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: LocalDoBuiltin {
                                    operation: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "b",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    inputs: Filled(
                                        [],
                                    ),
                                    outputs: Filled(
                                        [
                                            Filled(
                                                NodeId(
                                                    "_t0",
                                                ),
                                            ),
                                        ],
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "b_0",
                                    ),
                                ),
                                node: ReadRef {
                                    storage_type: Filled(
                                        FFI(
                                            I32,
                                        ),
                                    ),
                                    source: Filled(
                                        NodeId(
                                            "_t0",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_v_0_ref",
                                    ),
                                ),
                                node: AllocTemporary {
                                    place: Filled(
                                        Local,
                                    ),
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    buffer_flags: Filled(
                                        BufferFlags {
                                            map_read: true,
                                            map_write: true,
                                            copy_src: false,
                                            copy_dst: false,
                                            storage: false,
                                            uniform: false,
                                        },
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t1",
                                    ),
                                ),
                                node: DefaultJoin,
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t2",
                                    ),
                                ),
                                node: InlineJoin {
                                    funclet: Filled(
                                        FuncletId(
                                            "_foo2",
                                        ),
                                    ),
                                    captures: Filled(
                                        [],
                                    ),
                                    continuation: Filled(
                                        NodeId(
                                            "_t1",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            ScheduleSelect {
                                operations: Filled(
                                    [
                                        Filled(
                                            RemoteNodeId {
                                                funclet: Filled(
                                                    MetaId(
                                                        "val",
                                                    ),
                                                ),
                                                node: Some(
                                                    Filled(
                                                        NodeId(
                                                            "r",
                                                        ),
                                                    ),
                                                ),
                                            },
                                        ),
                                        Filled(
                                            RemoteNodeId {
                                                funclet: Filled(
                                                    MetaId(
                                                        "sptl",
                                                    ),
                                                ),
                                                node: None,
                                            },
                                        ),
                                        Filled(
                                            RemoteNodeId {
                                                funclet: Filled(
                                                    MetaId(
                                                        "tmln",
                                                    ),
                                                ),
                                                node: None,
                                            },
                                        ),
                                    ],
                                ),
                                condition: Filled(
                                    NodeId(
                                        "b_0",
                                    ),
                                ),
                                callee_funclet_ids: Filled(
                                    [
                                        Filled(
                                            FuncletId(
                                                "_foo3",
                                            ),
                                        ),
                                        Filled(
                                            FuncletId(
                                                "_foo4",
                                            ),
                                        ),
                                    ],
                                ),
                                callee_arguments: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "_v_0_ref",
                                            ),
                                        ),
                                    ],
                                ),
                                continuation_join: Filled(
                                    NodeId(
                                        "_t2",
                                    ),
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: ScheduleExplicit,
                header: FuncletHeader {
                    name: FuncletId(
                        "_foo2",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_v_0_ref",
                                ),
                            ),
                            typ: Local(
                                "&i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "r",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Saved,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: None,
                            typ: Local(
                                "i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "o",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    binding: ScheduleBinding(
                        ScheduleBinding {
                            implicit_tags: (
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ),
                            meta_map: MetaMapping {
                                value: (
                                    MetaId(
                                        "val",
                                    ),
                                    FuncletId(
                                        "main",
                                    ),
                                ),
                                timeline: (
                                    MetaId(
                                        "tmln",
                                    ),
                                    FuncletId(
                                        "time",
                                    ),
                                ),
                                spatial: (
                                    MetaId(
                                        "sptl",
                                    ),
                                    FuncletId(
                                        "space",
                                    ),
                                ),
                            },
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_0v_0",
                                    ),
                                ),
                                node: ReadRef {
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    source: Filled(
                                        NodeId(
                                            "_v_0_ref",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t0",
                                    ),
                                ),
                                node: DefaultJoin,
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t1",
                                    ),
                                ),
                                node: InlineJoin {
                                    funclet: Filled(
                                        FuncletId(
                                            "_foo0",
                                        ),
                                    ),
                                    captures: Filled(
                                        [],
                                    ),
                                    continuation: Filled(
                                        NodeId(
                                            "_t0",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Jump {
                                join: Filled(
                                    NodeId(
                                        "_t1",
                                    ),
                                ),
                                arguments: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "_0v_0",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: ScheduleExplicit,
                header: FuncletHeader {
                    name: FuncletId(
                        "_foo3",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_v_0_ref",
                                ),
                            ),
                            typ: Local(
                                "&i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Dead,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Saved,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: None,
                            typ: Local(
                                "&i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "one",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Saved,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    binding: ScheduleBinding(
                        ScheduleBinding {
                            implicit_tags: (
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ),
                            meta_map: MetaMapping {
                                value: (
                                    MetaId(
                                        "val",
                                    ),
                                    FuncletId(
                                        "main",
                                    ),
                                ),
                                timeline: (
                                    MetaId(
                                        "tmln",
                                    ),
                                    FuncletId(
                                        "time",
                                    ),
                                ),
                                spatial: (
                                    MetaId(
                                        "sptl",
                                    ),
                                    FuncletId(
                                        "space",
                                    ),
                                ),
                            },
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t0",
                                    ),
                                ),
                                node: AllocTemporary {
                                    place: Filled(
                                        Local,
                                    ),
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    buffer_flags: Filled(
                                        BufferFlags {
                                            map_read: true,
                                            map_write: true,
                                            copy_src: false,
                                            copy_dst: false,
                                            storage: false,
                                            uniform: false,
                                        },
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: LocalDoBuiltin {
                                    operation: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "one",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    inputs: Filled(
                                        [],
                                    ),
                                    outputs: Filled(
                                        [
                                            Filled(
                                                NodeId(
                                                    "_t0",
                                                ),
                                            ),
                                        ],
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "one_0",
                                    ),
                                ),
                                node: ReadRef {
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    source: Filled(
                                        NodeId(
                                            "_t0",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: LocalDoBuiltin {
                                    operation: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "one",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    inputs: Filled(
                                        [],
                                    ),
                                    outputs: Filled(
                                        [
                                            Filled(
                                                NodeId(
                                                    "_v_0_ref",
                                                ),
                                            ),
                                        ],
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "_v_0_ref",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Funclet(
            Funclet {
                kind: ScheduleExplicit,
                header: FuncletHeader {
                    name: FuncletId(
                        "_foo4",
                    ),
                    args: [
                        FuncletArgument {
                            name: Some(
                                NodeId(
                                    "_v_0_ref",
                                ),
                            ),
                            typ: Local(
                                "&i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Dead,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Saved,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    ret: [
                        FuncletArgument {
                            name: None,
                            typ: Local(
                                "&i64",
                            ),
                            tags: [
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "two",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Saved,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "tmln",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ],
                        },
                    ],
                    binding: ScheduleBinding(
                        ScheduleBinding {
                            implicit_tags: (
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                                Tag {
                                    quot: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "sptl",
                                                ),
                                            ),
                                            node: None,
                                        },
                                    ),
                                    flow: Usable,
                                },
                            ),
                            meta_map: MetaMapping {
                                value: (
                                    MetaId(
                                        "val",
                                    ),
                                    FuncletId(
                                        "main",
                                    ),
                                ),
                                timeline: (
                                    MetaId(
                                        "tmln",
                                    ),
                                    FuncletId(
                                        "time",
                                    ),
                                ),
                                spatial: (
                                    MetaId(
                                        "sptl",
                                    ),
                                    FuncletId(
                                        "space",
                                    ),
                                ),
                            },
                        },
                    ),
                },
                commands: [
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: Phi {
                                    index: Filled(
                                        0,
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "_t0",
                                    ),
                                ),
                                node: AllocTemporary {
                                    place: Filled(
                                        Local,
                                    ),
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    buffer_flags: Filled(
                                        BufferFlags {
                                            map_read: true,
                                            map_write: true,
                                            copy_src: false,
                                            copy_dst: false,
                                            storage: false,
                                            uniform: false,
                                        },
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: LocalDoBuiltin {
                                    operation: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "two",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    inputs: Filled(
                                        [],
                                    ),
                                    outputs: Filled(
                                        [
                                            Filled(
                                                NodeId(
                                                    "_t0",
                                                ),
                                            ),
                                        ],
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: Some(
                                    NodeId(
                                        "two_0",
                                    ),
                                ),
                                node: ReadRef {
                                    storage_type: Filled(
                                        FFI(
                                            I64,
                                        ),
                                    ),
                                    source: Filled(
                                        NodeId(
                                            "_t0",
                                        ),
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        Node(
                            NamedNode {
                                name: None,
                                node: LocalDoBuiltin {
                                    operation: Filled(
                                        RemoteNodeId {
                                            funclet: Filled(
                                                MetaId(
                                                    "val",
                                                ),
                                            ),
                                            node: Some(
                                                Filled(
                                                    NodeId(
                                                        "two",
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                    inputs: Filled(
                                        [],
                                    ),
                                    outputs: Filled(
                                        [
                                            Filled(
                                                NodeId(
                                                    "_v_0_ref",
                                                ),
                                            ),
                                        ],
                                    ),
                                },
                            },
                        ),
                    ),
                    Filled(
                        TailEdge(
                            Return {
                                return_values: Filled(
                                    [
                                        Filled(
                                            NodeId(
                                                "_v_0_ref",
                                            ),
                                        ),
                                    ],
                                ),
                            },
                        ),
                    ),
                ],
            },
        ),
        Pipeline(
            Pipeline {
                name: "main",
                funclet: FuncletId(
                    "foo",
                ),
                effect: Some(
                    EffectId(
                        "_loop_eff",
                    ),
                ),
            },
        ),
    ],
}

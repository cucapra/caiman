#version 0.1.0

tmln time(e: Event) -> Event { returns e }
sptl space(s: BufferSpace) -> BufferSpace { returns s }

extern(cpu) pure sum(i64) -> i64

val select_sum(v1: i64, v2: i64, v3: i64) -> i64 {
    returns sum(v2) if condition else sum(v3)
    condition :- sum(v1) < 0
}

fn select_sum_impl(v1: i64, v2: i64, v3: i64) -> i64 impls select_sum,time,space {
    if sum(v1) < 0 { 
        sum(v2)                                                                    
    }
    else { 
        sum(v3)
    }
}

pipeline main { select_sum_impl }